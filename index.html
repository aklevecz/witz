<!DOCTYPE html>
<head>
        <title>hummus for life | witz hummus</title>

        <link rel="shortcut icon"              href="witzIcon.ico">
        <meta http-equiv="Content-Type"        content="text/html; charset=utf-8" />
        <meta name=viewport                    content="width=device-width, initial-scale=1">

        <meta name="description"               content="witz hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus">

        <meta property="og:url"                content="www.witz-hummus.com" />
        <meta property="og:type"               content="hummus" />
        <meta property="og:title"              content="hummus for life | witz hummus" />
        <meta property="og:description"        content="witz hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus hummus" />
        <meta property="og:image"              content="linkPreview.png">
        <meta property="og:image:width"        content="1200" />
        <meta property="og:image:height"       content="630" />

<script src='https://api.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v0.47.0/mapbox-gl.css' rel='stylesheet' />
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link rel="stylesheet" href="css/main.css">


</head>
<body style="background-color:black">

    <div id="container"></div>
    <div id="unmap" style="position:absolute;width:100%;height:100%;top:0;display:none"></div>
    <div id='map' style='display:none;'></div>


    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="js/witz.js"></script>
    <script src="js/map.js"></script>
    <script src="js/utility.js"></script>
    <script>

    //define vars
    var container = document.getElementById('container');
    var obj, svg, links;
    var counter = 0;
    var d3svg;
    var theMap = document.getElementById('map');
    var unMap = document.getElementById('unmap');
    unMap.addEventListener("click" ,  ()=>{theMap.style.display="none";unMap.style.display="none";});

    //inital display
    var desk = window.innerWidth > 740;
    var width = window.innerWidth;
    var vg = desk ? '-01' : '-02';
    container.innerHTML = `<object data="svgs/witz${vg}.svg"/>`;
    //on resize shift svg then run the selector functions
    window.addEventListener("resize", resize)
    
    function resize() {
        var desk= window.innerWidth > window.innerHeight;
        if (width !== window.innerWidth){
            alert(width,'', window.innerWidth)
            getSvg(desk);
            mapSize(desk);
        }
        width = window.innerWidth;
    }


    function mapSize(desk){
        if (desk) {
            theMap.style.width = "37%";
            theMap.style.left = "33%";

            map.resize();
        } else {
            theMap.style.width = "100%";
            theMap.style.left = "0%";

            map.resize();
        }
    }


    //wait for it to load then grab obj and init
    window.onload = function(e){
        getSvg(desk);   
        mapSize(desk);
    }

    function main(desk){
        setTimeout(()=>{setInterval(colorizer, 1);}, 1000);
        
        setTimeout(() => {
            links = svg.querySelectorAll("[id^='link']");
            createLinks(links);
        }, 1000)
        console.log(desk);
        if (desk) {
            deskRun();
        }
    }

    function deskRun(){       
            lineMover();
    }

    
    </script>
</body>
</html>

